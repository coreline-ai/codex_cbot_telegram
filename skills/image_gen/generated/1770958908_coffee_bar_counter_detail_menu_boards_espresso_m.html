<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Generated Image</title>
  <style>
    html, body { margin: 0; width: 100%; height: 100%; background: #0b1020; overflow: hidden; }
    #canvas-container { width: 1200px; height: 1200px; }
    #art { width: 1200px; height: 1200px; display: block; }
  </style>
</head>
<body>
  <div id="canvas-container"><canvas id="art" width="1200" height="1200"></canvas></div>
  <script>
    const prompt = 'Coffee bar counter detail, menu boards, espresso machine, warm lights, modern cafe';
    const lowerPrompt = prompt.toLowerCase();
    const theme = 'cafe';
    const isProduct = true;
    const hasCounterFocus = lowerPrompt.includes('counter') || lowerPrompt.includes('bar') || lowerPrompt.includes('espresso');
    const isEvening = lowerPrompt.includes('night') || lowerPrompt.includes('evening') || lowerPrompt.includes('blue hour');
    const canvas = document.getElementById('art');
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;

    function hashText(text) {
      let h = 2166136261;
      for (let i = 0; i < text.length; i += 1) {
        h ^= text.charCodeAt(i);
        h += (h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24);
      }
      return h >>> 0;
    }
    function rng(seed) {
      let x = seed || 1;
      return () => {
        x ^= x << 13; x ^= x >>> 17; x ^= x << 5;
        return (x >>> 0) / 4294967296;
      };
    }

    const rand = rng(hashText(prompt));
    const palettes = {
      cafe: ['#28170f', '#4a2f20', '#7d523a'],
      tech: ['#0b1329', '#143464', '#1b5b8f'],
      fashion: ['#251922', '#553548', '#8f5f74'],
      travel: ['#18445d', '#2a6f89', '#58adc2'],
      medical: ['#14384c', '#1d5872', '#3a98b8'],
      default: ['#111827', '#1f2937', '#334155']
    };

    function fillBg(colors) {
      const g = ctx.createLinearGradient(0, 0, width, height);
      g.addColorStop(0, colors[0]);
      g.addColorStop(0.6, colors[1]);
      g.addColorStop(1, colors[2]);
      ctx.fillStyle = g;
      ctx.fillRect(0, 0, width, height);
    }

    function drawCafe() {
      if (isProduct) {
        // Product close-up (latte + beans)
        ctx.fillStyle = 'rgba(58,38,26,0.92)';
        ctx.fillRect(0, 760, width, 440);

        const cupX = 610;
        const cupY = 520;
        const cupW = 340;
        const cupH = 260;

        ctx.fillStyle = 'rgba(246,243,238,0.98)';
        ctx.fillRect(cupX - cupW/2, cupY - cupH/2, cupW, cupH);
        ctx.fillStyle = 'rgba(92,54,31,0.96)';
        ctx.beginPath();
        ctx.ellipse(cupX, cupY - cupH*0.18, cupW*0.44, 38, 0, 0, Math.PI*2);
        ctx.fill();

        for (let i = 0; i < 84; i += 1) {
          const bx = rand() * width;
          const by = 780 + rand() * 390;
          ctx.fillStyle = `rgba(52,29,17,${0.68 + rand()*0.28})`;
          ctx.beginPath();
          ctx.ellipse(bx, by, 8 + rand()*10, 5 + rand()*7, rand()*Math.PI, 0, Math.PI*2);
          ctx.fill();
        }
        return;
      }

      // Interior wide / counter-focused shots inspired by warm Korean cafe style
      const wallTone = isEvening ? 'rgba(52,34,24,0.95)' : 'rgba(72,49,36,0.92)';
      const floorGrad = ctx.createLinearGradient(0, 620, 0, height);
      floorGrad.addColorStop(0, isEvening ? '#3f2e24' : '#5c4332');
      floorGrad.addColorStop(1, '#2a1d14');

      // Ceiling + beams
      ctx.fillStyle = '#1b130f';
      ctx.fillRect(0, 0, width, 175);
      for (let i = 0; i < 7; i += 1) {
        ctx.fillStyle = 'rgba(12,8,6,0.55)';
        ctx.fillRect(80 + i * 170, 0, 42, 175);
      }

      // Pendant lights
      for (let i = 0; i < 7; i += 1) {
        const lx = 120 + i * 165 + (rand() * 24 - 12);
        const ly = 38 + (rand() * 6 - 3);
        ctx.strokeStyle = 'rgba(230,220,190,0.55)';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(lx, 0);
        ctx.lineTo(lx, ly);
        ctx.stroke();

        ctx.fillStyle = 'rgba(248,241,220,0.95)';
        ctx.fillRect(lx - 14, ly, 28, 34);
        ctx.fillStyle = 'rgba(255,232,178,0.18)';
        ctx.fillRect(lx - 42, ly + 22, 84, 84);
      }

      // Main walls + floor
      ctx.fillStyle = wallTone;
      ctx.fillRect(0, 175, width, 445);
      ctx.fillStyle = floorGrad;
      ctx.fillRect(0, 620, width, 580);

      // Left wooden panel wall
      ctx.fillStyle = 'rgba(169,132,89,0.9)';
      ctx.fillRect(0, 175, 255, 500);
      for (let i = 0; i < 10; i += 1) {
        ctx.fillStyle = 'rgba(126,92,62,0.55)';
        ctx.fillRect(18 + i * 22, 185, 4, 470);
      }

      // Right glass windows
      ctx.fillStyle = isEvening ? 'rgba(40,62,95,0.56)' : 'rgba(78,118,158,0.46)';
      ctx.fillRect(850, 175, 350, 630);
      for (let i = 0; i < 6; i += 1) {
        ctx.fillStyle = 'rgba(18,16,16,0.75)';
        ctx.fillRect(850 + i * 58, 175, 10, 630);
      }

      // Back counter + menu boards
      ctx.fillStyle = 'rgba(238,231,218,0.95)';
      ctx.fillRect(265, 300, 540, 150);
      ctx.fillStyle = 'rgba(24,21,21,0.92)';
      ctx.fillRect(265, 450, 540, 90);
      for (let i = 0; i < 6; i += 1) {
        ctx.fillStyle = 'rgba(245,243,238,0.96)';
        ctx.fillRect(292 + i * 84, 245, 68, 45);
      }

      // Counter machinery accents
      ctx.fillStyle = 'rgba(180,186,194,0.85)';
      ctx.fillRect(520, 395, 120, 54);
      ctx.fillStyle = 'rgba(70,120,224,0.55)';
      ctx.fillRect(655, 408, 44, 26);

      if (hasCounterFocus) {
        // Counter-focused framing
        ctx.fillStyle = 'rgba(64,42,28,0.96)';
        ctx.fillRect(0, 620, width, 580);
        ctx.fillStyle = 'rgba(195,156,116,0.82)';
        ctx.fillRect(80, 640, 1040, 115);
        for (let i = 0; i < 10; i += 1) {
          const cx = 120 + i * 98;
          ctx.fillStyle = 'rgba(248,246,238,0.95)';
          ctx.fillRect(cx, 560 + rand() * 30, 26, 48);
        }
        return;
      }

      // Seating layout (tables + chairs)
      for (let r = 0; r < 3; r += 1) {
        for (let c = 0; c < 4; c += 1) {
          const tx = 295 + c * 160 + (rand() * 8 - 4);
          const ty = 610 + r * 150 + (rand() * 8 - 4);

          ctx.fillStyle = 'rgba(118,78,51,0.95)';
          ctx.fillRect(tx, ty, 120, 68);

          // chairs
          ctx.fillStyle = 'rgba(76,50,34,0.95)';
          ctx.fillRect(tx - 24, ty + 8, 18, 48);
          ctx.fillRect(tx + 126, ty + 8, 18, 48);
          ctx.fillRect(tx + 18, ty + 72, 20, 44);
          ctx.fillRect(tx + 82, ty + 72, 20, 44);
        }
      }
    }

    function drawGeneral() {
      for (let i = 0; i < 55; i += 1) {
        const x = rand() * width;
        const y = rand() * height;
        const r = 30 + rand() * 190;
        ctx.fillStyle = `rgba(255,255,255,${0.04 + rand()*0.12})`;
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    fillBg(palettes[theme] || palettes.default);
    if (theme === 'cafe') drawCafe();
    else drawGeneral();

    ctx.fillStyle = 'rgba(0,0,0,0.35)';
    ctx.fillRect(38, 1030, 1124, 126);
    ctx.fillStyle = 'rgba(255,255,255,0.92)';
    ctx.font = 'bold 30px Arial';
    ctx.fillText(`Theme: ${theme.toUpperCase()}`, 72, 1084);
    ctx.font = '24px Arial';
    ctx.fillStyle = 'rgba(255,255,255,0.8)';
    const shortPrompt = prompt.length > 82 ? prompt.slice(0, 82) + '...' : prompt;
    ctx.fillText(shortPrompt, 72, 1134);
  </script>
</body>
</html>
