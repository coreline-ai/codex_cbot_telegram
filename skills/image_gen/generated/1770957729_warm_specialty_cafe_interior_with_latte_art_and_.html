<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Generated Image</title>
  <style>
    html, body { margin: 0; width: 100%; height: 100%; background: #0b1020; overflow: hidden; }
    #canvas-container { width: 1200px; height: 1200px; }
    #art { width: 1200px; height: 1200px; display: block; }
  </style>
</head>
<body>
  <div id="canvas-container"><canvas id="art" width="1200" height="1200"></canvas></div>
  <script>
    const prompt = 'Warm specialty cafe interior with latte art and roasted beans';
    const theme = 'cafe';
    const isProduct = false;
    const canvas = document.getElementById('art');
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;

    function hashText(text) {
      let h = 2166136261;
      for (let i = 0; i < text.length; i += 1) {
        h ^= text.charCodeAt(i);
        h += (h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24);
      }
      return h >>> 0;
    }
    function rng(seed) {
      let x = seed || 1;
      return () => {
        x ^= x << 13; x ^= x >>> 17; x ^= x << 5;
        return (x >>> 0) / 4294967296;
      };
    }

    const rand = rng(hashText(prompt));
    const palettes = {
      cafe: ['#28170f', '#4a2f20', '#7d523a'],
      tech: ['#0b1329', '#143464', '#1b5b8f'],
      fashion: ['#251922', '#553548', '#8f5f74'],
      travel: ['#18445d', '#2a6f89', '#58adc2'],
      medical: ['#14384c', '#1d5872', '#3a98b8'],
      default: ['#111827', '#1f2937', '#334155']
    };

    function fillBg(colors) {
      const g = ctx.createLinearGradient(0, 0, width, height);
      g.addColorStop(0, colors[0]);
      g.addColorStop(0.6, colors[1]);
      g.addColorStop(1, colors[2]);
      ctx.fillStyle = g;
      ctx.fillRect(0, 0, width, height);
    }

    function drawCafe() {
      ctx.fillStyle = 'rgba(58,38,26,0.92)';
      ctx.fillRect(0, 760, width, 440);

      const cupX = isProduct ? 610 : 520;
      const cupY = isProduct ? 520 : 570;
      const cupW = isProduct ? 340 : 290;
      const cupH = isProduct ? 260 : 220;

      ctx.fillStyle = 'rgba(246,243,238,0.98)';
      ctx.fillRect(cupX - cupW/2, cupY - cupH/2, cupW, cupH);
      ctx.fillStyle = 'rgba(92,54,31,0.96)';
      ctx.beginPath();
      ctx.ellipse(cupX, cupY - cupH*0.18, cupW*0.44, 38, 0, 0, Math.PI*2);
      ctx.fill();

      for (let i = 0; i < (isProduct ? 70 : 34); i += 1) {
        const bx = rand() * width;
        const by = 780 + rand() * 390;
        ctx.fillStyle = `rgba(52,29,17,${0.68 + rand()*0.28})`;
        ctx.beginPath();
        ctx.ellipse(bx, by, 8 + rand()*10, 5 + rand()*7, rand()*Math.PI, 0, Math.PI*2);
        ctx.fill();
      }
    }

    function drawGeneral() {
      for (let i = 0; i < 55; i += 1) {
        const x = rand() * width;
        const y = rand() * height;
        const r = 30 + rand() * 190;
        ctx.fillStyle = `rgba(255,255,255,${0.04 + rand()*0.12})`;
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    fillBg(palettes[theme] || palettes.default);
    if (theme === 'cafe') drawCafe();
    else drawGeneral();

    ctx.fillStyle = 'rgba(0,0,0,0.35)';
    ctx.fillRect(38, 1030, 1124, 126);
    ctx.fillStyle = 'rgba(255,255,255,0.92)';
    ctx.font = 'bold 30px Arial';
    ctx.fillText(`Theme: ${theme.toUpperCase()}`, 72, 1084);
    ctx.font = '24px Arial';
    ctx.fillStyle = 'rgba(255,255,255,0.8)';
    const shortPrompt = prompt.length > 82 ? prompt.slice(0, 82) + '...' : prompt;
    ctx.fillText(shortPrompt, 72, 1134);
  </script>
</body>
</html>
